suppressPackageStartupMessages(library(Seurat))
suppressPackageStartupMessages(library(hdf5r))
suppressPackageStartupMessages(library(jsonlite))
suppressPackageStartupMessages(library(ggplot2))
printImageURI<-function(file){
uri=image_uri(file)
file.remove(file)
cat(sprintf("<img src=\"%s\" />\n", uri))
}
# Global variable for each docker session
raw_expr_data <- NULL
obj <- NULL
filename <- 'Yan_2013_expression.csv'
raw_expr_data <<- read.csv(filename,row.names = 1)
print(list(req$body, filename,min_cells,min_genes,nVariableFeatures))
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
filename
raw_expr_data <<- read.csv(filename,row.names = 1)
print(list(req$body, filename,min_cells,min_genes,nVariableFeatures))
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
nVariableFeatures=2000
min_genes
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
top10 <- head(VariableFeatures(obj), 10)
print(top10)
plot1 <- VariableFeaturePlot(obj)
plot2 <- LabelPoints(plot = plot1, points = top10, repel = TRUE)
plot <- CombinePlots(plots = list(plot1, plot2))+theme(aspect.ratio=2)
return(print(plot))
plot
plot2
plot1
CombinePlots(plots = list(plot1, plot2))+theme(aspect.ratio=2)
plot2
plot1
plot <- CombinePlots(plots = list(plot1, plot2))
plot
CombinePlots(plots = list(plot1, plot2))+theme(aspect.ratio=2)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
raw_expr_data <<- read.csv(filename,row.names = 1)
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
obj <<- ScaleData(obj, features = rownames(obj))
obj <<- RunPCA(obj, features = VariableFeatures(object = obj))
obj <<- FindNeighbors(obj, dims = 1:nPCs)
resolution=0.8
nPCs=25
obj <<- ScaleData(obj, features = rownames(obj))
obj <<- RunPCA(obj, features = VariableFeatures(object = obj))
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- FindClusters(obj, resolution = resolution)
obj <<- RunUMAP(obj, dims = 1:nPCs)
nPCs
length(obj$seurat_clusters)
length(as.factor(obj$seurat_clusters))
obj$seurat_clusters
#' Read data into Seurat object
# @param filename
# @param type Upload expression file type, CellGene, 10X h5, 10X folder
#' @post /load
function(req, nPCs=25, resolution=0.8){
obj <<- ScaleData(obj, features = rownames(obj))
obj <<- RunPCA(obj, features = VariableFeatures(object = obj))
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- FindClusters(obj, resolution = resolution)
obj <<- RunUMAP(obj, dims = 1:nPCs)
return(list(
n_seurat_clusters = length(levels(obj$seurat_clusters))
))
}
plot <- DimPlot(obj,reduction = "umap")
plot
gene="BRCA1"
plot <- FeaturePlot(obj,gene)
plot
rownames(obj)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
ncol(obj)
nPCs
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- RunPCA(obj, features = VariableFeatures(object = obj))
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
VariableFeatures(object = obj)
VariableFeatures
VariableFeatures(object = obj)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
#print(obj)
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs)
variable_genes <- VariableFeatures(obj)
#print(obj)
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs)
if(nPCs > ncol(obj)){
nPC <- ncol(obj)
}
#print(obj)
if(nPCs > ncol(obj)){
nPC <- ncol(obj)
}
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs)
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- FindClusters(obj, resolution = resolution)
obj <<- RunUMAP(obj, dims = 1:nPCs)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
suppressPackageStartupMessages(library(Seurat))
suppressPackageStartupMessages(library(hdf5r))
suppressPackageStartupMessages(library(jsonlite))
suppressPackageStartupMessages(library(ggplot2))
raw_expr_data <- NULL
obj <- NULL
filename <- 'Yan_2013_expression.csv'
raw_expr_data <<- read.csv(filename,row.names = 1)
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
min_cells=3
min_genes=200
nVariableFeatures=2000
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
nPCs=20
resolution=0.8
nPCs <- as.numeric(nPCs)
resolution <- as.numeric(resolution)
obj <<- NormalizeData(obj)
obj <<- ScaleData(obj, features = rownames(obj))
variable_genes <- VariableFeatures(obj)
#print(obj)
if(nPCs > ncol(obj)){
nPC <- ncol(obj)
}
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs)
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- FindClusters(obj, resolution = resolution)
obj <<- RunUMAP(obj, dims = 1:nPCs)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features =min_genes)
obj
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
percent.ribo
obj$nCount_RNA
obj$orig.ident
empty_ident <- as.factor(obj$orig.ident)
levels(empty_ident) <- NULL
empty_ident
levels(empty_ident)
levels(empty_ident) <- ""
rep(length(levels(empty_ident)))
levels(empty_ident) <- rep(length(levels(empty_ident)),"original")
levels(empty_ident) <- rep("original",length(levels(empty_ident)))
levels(empty_ident)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
suppressPackageStartupMessages(library(Seurat))
suppressPackageStartupMessages(library(hdf5r))
suppressPackageStartupMessages(library(jsonlite))
suppressPackageStartupMessages(library(ggplot2))
raw_expr_data <- NULL
obj <- NULL
filename <- 'Yan_2013_expression.csv'
raw_expr_data <<- read.csv(filename,row.names = 1)
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features = min_genes)
empty_ident <- as.factor(obj$orig.ident)
levels(empty_ident) <- rep("original",length(levels(empty_ident)))
Idents(obj) <<- obj$orig.ident
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
min_cells=1
min_genes=200
nVariableFeatures=2000
raw_expr_data <<- read.csv(filename,row.names = 1)
raw_obj <- CreateSeuratObject(raw_expr_data)
obj <<- CreateSeuratObject(raw_expr_data,min.cells = min_cells, min.features = min_genes)
empty_ident <- as.factor(obj$orig.ident)
levels(empty_ident) <- rep("original",length(levels(empty_ident)))
Idents(obj) <<- obj$orig.ident
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures)
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures,verbose = F)
nPCs <- as.numeric(nPCs)
nPCs=20
resolution=0.2
nPCs <- as.numeric(nPCs)
resolution <- as.numeric(resolution)
obj <<- NormalizeData(obj,verbose = F)
obj <<- ScaleData(obj, features = rownames(obj),verbose = F)
variable_genes <- VariableFeatures(obj,verbose = F)
#print(obj)
if(nPCs > ncol(obj)){
nPC <- ncol(obj)
}
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs)
obj <<- FindNeighbors(obj, dims = 1:nPCs)
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs,verbose = F)
obj <<- FindNeighbors(obj, dims = 1:nPCs,verbose = F)
obj <<- FindClusters(obj, resolution = resolution,verbose = F)
obj <<- RunUMAP(obj, dims = 1:nPCs,n.neighbors = 15,verbose = F)
return(list(
n_seurat_clusters = length(levels(obj$seurat_clusters))
))
n_seurat_clusters = length(levels(obj$seurat_clusters))
n_seurat_clusters
Idents(obj)
Idents(obj)
Idents
Idents(obj)
obj@meta.data
colnames(obj@meta.data)
name='orig.ident'
which(colnames(obj@meta.data) == name)
obj@meta.data[,idx]
idx <- which(colnames(obj@meta.data) == name)
obj@meta.data[,idx]
Idents(obj) <<- obj@meta.data[,idx]
obj
obj@meta.data[,idx]
Idents(obj) <<- obj@meta.data[,idx]
Idents(obj) <- obj@meta.data[,idx]
Idents(obj)
idx=2
Idents(obj) <- obj@meta.data[,idx]
Idents(obj)
colnames(obj@meta.data)
ident_idx
ident_idx <- 1
Idents(obj) <- obj@meta.data[,ident_idx]
Idents(obj)
obj <<- AddMetaData(obj, metadata =rep("original",length(levels(empty_ident))),col.name = "empty.ident")
empty_ident
empty_ident <- as.factor(obj$orig.ident)
obj <<- AddMetaData(obj, metadata =rep("original",empty_ident,col.name = "empty.ident")
Idents(obj) <<- obj$orig.ident
obj[["percent.mt"]] <<- PercentageFeatureSet(obj, pattern = "^MT-")
rb.genes <- rownames(obj)[grep("^RP[SL]",rownames(obj))]
percent.ribo <- Matrix::colSums(obj[rb.genes,])/Matrix::colSums(obj)*100
obj <<- AddMetaData(obj, percent.ribo, col.name = "percent.ribo")
raw_percent_zero <- length(which((as.matrix(GetAssayData(raw_obj)) > 0)))/length(GetAssayData(raw_obj))
filter_percent_zero <- length(which((as.matrix(GetAssayData(obj)) > 0)))/length(GetAssayData(obj))
raw_mean_expr <- mean(as.matrix(GetAssayData(raw_obj)))
filter_mean_expr <- mean(as.matrix(GetAssayData(obj)))
obj <<- FindVariableFeatures(obj, selection.method = "vst", nfeatures = nVariableFeatures,verbose = F)
return(list(
raw_n_genes = dim(raw_obj)[1],
raw_n_cells = dim(raw_obj)[2],
raw_percent_zero = raw_percent_zero,
raw_mean_expr = raw_mean_expr,
filter_n_genes = dim(obj)[1],
filter_n_cells = dim(obj)[2],
filter_percent_zero = filter_percent_zero,
filter_mean_expr = filter_mean_expr
))
}
#' Get all gene names
#' @get /genes
function(){
return(rownames(obj))
}
#' Get all Seurat Idents names
#' @get /idents
function(){
return(colnames(obj@meta.data))
}
#' Set Seurat Idents by name
#' @post /idents
#'
function(req,name='orig.ident'){
ident_idx <<- which(colnames(obj@meta.data) == name)
return(ident_idx)
}
#' Read data into Seurat object
# @param filename
# @param type Upload expression file type, CellGene, 10X h5, 10X folder
#' @post /cluster
function(req, nPCs=20, resolution=0.2){
nPCs <- as.numeric(nPCs)
resolution <- as.numeric(resolution)
obj <<- NormalizeData(obj,verbose = F)
obj <<- ScaleData(obj, features = rownames(obj),verbose = F)
variable_genes <- VariableFeatures(obj,verbose = F)
#print(obj)
if(nPCs > ncol(obj)){
nPC <- ncol(obj)
}
obj <<- RunPCA(obj, features = variable_genes, npcs = nPCs,verbose = F)
obj <<- FindNeighbors(obj, dims = 1:nPCs,verbose = F)
obj <<- FindClusters(obj, resolution = resolution,verbose = F)
obj <<- RunUMAP(obj, dims = 1:nPCs,n.neighbors = 15,verbose = F)
return(list(
n_seurat_clusters = length(levels(obj$seurat_clusters))
))
}
#' Plot QC
#' @get /qcplot
#' @serializer png
function(){
Idents(obj) <- obj@meta.data[,ident_idx]
plot <- VlnPlot(obj, features = c("nFeature_RNA", "nCount_RNA", "percent.mt"), ncol = 3)
return(print(plot))
}
#' Plot Variable genes
#' @get /var-genes-plot
#' @serializer png
function(){
top10 <- head(VariableFeatures(obj), 10)
plot1 <- VariableFeaturePlot(obj)
plot2 <- LabelPoints(plot = plot1, points = top10, repel = TRUE)
plot <- CombinePlots(plots = list(plot1, plot2))
return(print(plot))
}
#' Plot umap
#' @get /umap-cluster
#' @serializer png
function(){
plot <- DimPlot(obj,reduction = "umap")
return(print(plot))
}
#' Plot features in umap
#' @post /umap-gene
#' @serializer png
function(req, gene="BRCA1"){
plot <- FeaturePlot(obj,gene)
return(print(plot))
}
#' Plot features in violin
#' @post /violin-gene
#' @serializer png
function(req, gene="BRCA1"){
plot <- VlnPlot(obj, gene)
return(print(plot))
}
empty_ident
empty_ident <- as.factor(obj$orig.ident)
levels(empty_ident) <- rep("original",length(levels(empty_ident)))
empty_ident
colnames(obj@meta.data)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
VlnPlot(obj, features = c("nFeature_RNA", "nCount_RNA", "percent.mt"), ncol = 3)
CombinePlots(plots = list(plot1, plot2))
top10 <- head(VariableFeatures(obj), 10)
plot1 <- VariableFeaturePlot(obj)
plot2 <- LabelPoints(plot = plot1, points = top10, repel = TRUE)
plot <- CombinePlots(plots = list(plot1, plot2))
library(patchwork)
plot <- p1+p2
plot <- plot1+plot2
plot
plot <- plot1+plot2+theme(aspect.ratio = 2)
plot
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
library(plumber)
#setwd('C:/Users/flyku/Documents/GitHub/iris3-backend/plumber')
plumber::pr("iris3.R") %>% plumber::pr_run(host="0.0.0.0",port=8000)
